<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>alasalytest.com </title>
  <style>
    body {
      font-family: "Cairo", sans-serif;
      background: radial-gradient(circle at top, #0a192f, #000);
      color: #fff;
      text-align: center;
      padding: 40px;
      overflow-x: hidden;
    }

    /* Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ */
    header {
      font-size: 1.3em;
      color: #00eaff;
      margin-bottom: 30px;
      letter-spacing: 1px;
    }

    /* Ø§Ù„Ø´Ø¹Ø§Ø± ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
    .logo {
      font-size: 4em;
      font-weight: bold;
      color: white;
      margin: 40px 0 20px 0;
      text-shadow: 0 0 15px rgba(255,255,255,0.8);
      font-family: "Poppins", sans-serif;
    }

    button {
      background: linear-gradient(90deg, #00eaff, #0077ff);
      border: none;
      padding: 14px 28px;
      font-size: 1.2em;
      color: #fff;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      transform: scale(1.05);
      background: linear-gradient(90deg, #0077ff, #00eaff);
    }

    .results {
      margin-top: 40px;
      font-size: 1.3em;
      line-height: 1.8em;
    }

    .value {
      font-size: 1.5em;
      color: #00eaff;
      font-weight: bold;
    }

    canvas {
      margin-top: 40px;
      width: 90%;
      max-width: 500px;
      height: 250px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 12px;
    }

    .footer {
      margin-top: 50px;
      color: #777;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <header>ğŸŒ alasalytest.com</header>

  <div class="logo">alasaly</div>

  <button onclick="startTest()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>

  <div class="results" id="result">
    <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³Ø±Ø¹Ø©.</p>
  </div>

  <canvas id="chart"></canvas>

  <div class="footer"> creaitvity by omar otba alasaly</div>

  <script>
    let chart, dataPoints = [];
    const ctx = document.getElementById("chart").getContext("2d");

    // ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Chart.js
    const script = document.createElement("script");
    script.src = "https://cdn.jsdelivr.net/npm/chart.js";
    document.head.appendChild(script);

    script.onload = () => {
      chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: 'Ø§Ù„Ø³Ø±Ø¹Ø© (Mbps)',
            borderColor: '#00eaff',
            data: [],
            fill: false,
            tension: 0.3
          }]
        },
        options: {
          scales: {
            x: { display: false },
            y: { beginAtZero: true, ticks: { color: "#fff" } }
          },
          plugins: { legend: { labels: { color: '#fff' } } }
        }
      });
    };

    function updateChart(speed) {
      if (!chart) return;
      dataPoints.push(speed);
      chart.data.labels.push('');
      chart.data.datasets[0].data.push(speed);
      if (dataPoints.length > 20) {
        dataPoints.shift();
        chart.data.labels.shift();
      }
      chart.update();
    }

    // Ù‚ÙŠØ§Ø³ Ø§Ù„Ù€ Ping
    async function measurePing() {
      const url = "https://api.github.com"; 
      const start = performance.now();
      await fetch(url, { cache: "no-store" });
      const end = performance.now();
      return Math.round(end - start);
    }

    // Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    async function measureDownloadSpeed() {
      const fileUrl = "https://upload.wikimedia.org/wikipedia/commons/3/3f/JPEG_example_flower.jpg";
      const fileSize = 500000; // Ù†ØµÙ Ù…ÙŠØºØ§Ø¨Ø§ÙŠØª
      const startTime = performance.now();
      await fetch(fileUrl + "?cache=" + Math.random());
      const endTime = performance.now();
      const duration = (endTime - startTime) / 1000;
      const bitsLoaded = fileSize * 8;
      const speedMbps = (bitsLoaded / duration / 1024 / 1024).toFixed(2);
      updateChart(Number(speedMbps));
      return speedMbps;
    }

    // Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±ÙØ¹
    async function measureUploadSpeed() {
      const data = new Blob([new ArrayBuffer(500000)]);
      const startTime = performance.now();
      await fetch("https://httpbin.org/post", { method: "POST", body: data });
      const endTime = performance.now();
      const duration = (endTime - startTime) / 1000;
      const bitsSent = 500000 * 8;
      const speedMbps = (bitsSent / duration / 1024 / 1024).toFixed(2);
      updateChart(Number(speedMbps));
      return speedMbps;
    }

    async function startTest() {
      document.getElementById("result").innerHTML = "â³ Ø¬Ø§Ø±ÙŠ Ù‚ÙŠØ§Ø³ Ø§Ù„Ù€ Ping...";
      dataPoints = [];
      if (chart) { chart.destroy(); chart = null; }
      chart = new Chart(ctx, {
        type: 'line',
        data: { labels: [], datasets: [{ label: 'Ø§Ù„Ø³Ø±Ø¹Ø© (Mbps)', borderColor: '#00eaff', data: [], fill: false, tension: 0.3 }] },
        options: { scales: { x: { display: false }, y: { beginAtZero: true, ticks: { color: "#fff" } } } }
      });

      const ping = await measurePing();
      document.getElementById("result").innerHTML = `ğŸ“¶ <b>Ping:</b> <span class='value'>${ping} ms</span><br>Ø¬Ø§Ø±ÙŠ Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØ­Ù…ÙŠÙ„...`;

      const download = await measureDownloadSpeed();
      document.getElementById("result").innerHTML = `ğŸ“¶ Ping: <span class='value'>${ping} ms</span><br>â¬‡ï¸ ØªØ­Ù…ÙŠÙ„: <span class='value'>${download} Mbps</span><br>Ø¬Ø§Ø±ÙŠ Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±ÙØ¹...`;

      const upload = await measureUploadSpeed();
      document.getElementById("result").innerHTML = `
        âœ… <b>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:</b><br>
        ğŸ“¶ Ping: <span class='value'>${ping} ms</span><br>
        â¬‡ï¸ ØªØ­Ù…ÙŠÙ„: <span class='value'>${download} Mbps</span><br>
        â¬†ï¸ Ø±ÙØ¹: <span class='value'>${upload} Mbps</span>
      `;
    }
  </script>
</body>
</html>

